<script type="text/javascript">
	RED.nodes.registerType("node-red-contrib-basicauth", {
		category: "function",
		inputs: 1,
		outputs: 2,
		defaults: {
			name: {
        value: ""
      },
      realm: {
        value: ""
      },
			username: {
        value: ""
      },
			password: {
        value: ""
      },
		},
		label: function() {
      return this.name.trim() || "basic auth";
    },
		labelStyle: function() {
      return this.name.trim() ? "node_label_italic" : "";
    },
		paletteLabel: "basic http auth",
    color: "#e7e7ae",
    icon: "white-globe.png",
	});
</script>

<script type="text/x-red" data-template-name="node-red-contrib-basicauth">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name">
  </div>

  <hr />

  <div class="form-row">
    <label for="node-input-realm"><i class="fa fa-globe"></i> Realm</label>
    <input type="text" id="node-input-realm">
  </div>

  <div class="form-row">
    <label for="node-input-username"><i class="fa fa-user"></i> Username</label>
    <input type="text" id="node-input-username">
  </div>

  <div class="form-row">
    <label for="node-input-password"><i class="fa fa-key"></i> Password</label>
    <input type="text" id="node-input-password">
  </div>
</script>

<script type="text/x-red" data-help-name="node-red-contrib-basicauth">
  <p>Node-RED node providing basic access authentication for the HTTP In node</p>

  <h2>Configuation</h2>
  <p><em>All fields are required.</em></p>
  <ul>
    <li>Realm: the client-visible realm for authentication</li>
    <li>Username: the configured username for authentication</li>
    <li>Password: the configured password for authentication</li>
  </ul>

  <h2>Input</h2>
  <p>Always the HTTP In node</p>

  <h2>Output</h2>
  <p>The `msg` object has this structure:</p>
  <pre>
    <code>
      {
        payload: string, // An error message describing the situation
        username: string, // The username that the client attempted to log in with
        ipAddress: string | undefined // The value in the X-Real-IP header
      }
    </code>
  </pre>
</script>
